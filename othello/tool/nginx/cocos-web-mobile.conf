server {
    # 监听80端口
    listen 8082;
    # 设置服务器名，可以是localhost、您的本地IP或域名
    server_name 10.8.9.1;

    # 关闭服务器版本显示，增强安全性
    server_tokens off;

    # 最重要的配置：设置静态文件的根目录
    # 将 /path/to/your/cocos-project 替换为您的项目绝对路径！
    root /Users/dragonplus/Desktop/src/othello/othello/build/web-mobile;
    
    # 设置默认首页文件，Cocos构建的项目入口通常是index.html
    index index.html;

    # Gzip压缩配置（可选但推荐）
    gzip on;
    gzip_types text/plain application/javascript text/css;

    #  location / 块处理所有请求
    location / {
        # 首先尝试以文件形式响应请求（如index.html, main.js）
        # 如果文件不存在，则尝试以目录形式查找
        # 如果都找不到，最后将请求交给index.html（用于支持Vue/React/Cocos等前端路由）
        try_files $uri $uri/ /index.html;
    }

    #  location ~* \.(js|css|png|jpg|jpeg|gif|ico|json|webp|wasm)$ 块
    # 处理静态资源，设置长期缓存
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|json|webp|wasm)$ {
        # 设置静态资源缓存一个月，并禁止日志记录以减少I/O
        expires 1M;
        access_log off;
        add_header Cache-Control "public";
    }
}
